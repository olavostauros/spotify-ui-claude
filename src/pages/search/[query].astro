---
import AppLayout from '../../components/layout/AppLayout.astro';
import SearchBar from '../../components/search/SearchBar.astro';
import SearchResultCard from '../../components/search/SearchResultCard.astro';
import SongListItem from '../../components/content/SongListItem.astro';

export async function getStaticPaths() {
  return [
    { params: { query: 'weeknd' } },
    { params: { query: 'pop' } },
    { params: { query: 'chill' } },
  ];
}

const { query } = Astro.params;

// Mock search results based on query
const topResult = {
  type: 'artist' as const,
  title: 'The Weeknd',
  subtitle: 'Artist',
  image: 'https://picsum.photos/seed/weeknd/300/300',
  href: '/artist/1',
};

const songs = [
  { number: 1, title: 'Blinding Lights', artist: 'The Weeknd', album: 'After Hours', duration: '3:20', image: 'https://picsum.photos/seed/song1/40/40' },
  { number: 2, title: 'Save Your Tears', artist: 'The Weeknd', album: 'After Hours', duration: '3:35', image: 'https://picsum.photos/seed/song2/40/40' },
  { number: 3, title: 'Starboy', artist: 'The Weeknd', album: 'Starboy', duration: '3:50', image: 'https://picsum.photos/seed/song3/40/40' },
  { number: 4, title: 'Die For You', artist: 'The Weeknd', album: 'Starboy', duration: '4:20', image: 'https://picsum.photos/seed/song4/40/40' },
];

const artists = [
  { title: 'The Weeknd', subtitle: '95M monthly listeners', image: 'https://picsum.photos/seed/artist1/300/300', type: 'artist' as const, href: '/artist/1' },
  { title: 'Ariana Grande', subtitle: '82M monthly listeners', image: 'https://picsum.photos/seed/artist2/300/300', type: 'artist' as const, href: '/artist/2' },
  { title: 'Dua Lipa', subtitle: '78M monthly listeners', image: 'https://picsum.photos/seed/artist3/300/300', type: 'artist' as const, href: '/artist/3' },
];

const albums = [
  { title: 'After Hours', subtitle: 'The Weeknd', image: 'https://picsum.photos/seed/album1/300/300', type: 'album' as const, href: '/album/1' },
  { title: 'Starboy', subtitle: 'The Weeknd', image: 'https://picsum.photos/seed/album2/300/300', type: 'album' as const, href: '/album/2' },
  { title: 'Beauty Behind The Madness', subtitle: 'The Weeknd', image: 'https://picsum.photos/seed/album3/300/300', type: 'album' as const, href: '/album/3' },
];

const playlists = [
  { title: 'This Is The Weeknd', subtitle: 'All the essentials', image: 'https://picsum.photos/seed/playlist1/300/300', type: 'playlist' as const, href: '/playlist/1' },
  { title: 'Pop Hits', subtitle: 'The biggest pop songs', image: 'https://picsum.photos/seed/playlist2/300/300', type: 'playlist' as const, href: '/playlist/2' },
];
---

<AppLayout>
  <div class="p-6">
    <!-- Search Bar -->
    <div class="max-w-md mb-8">
      <SearchBar value={query} />
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
      <!-- Top Result -->
      <section>
        <h2 class="text-white text-2xl font-bold mb-4">Top result</h2>
        <div class="bg-spotify-light-gray p-6 rounded-lg hover:bg-opacity-80 transition-all group">
          <img
            src={topResult.image}
            alt={topResult.title}
            class="w-24 h-24 rounded-full mb-6"
          />
          <h3 class="text-white text-4xl font-bold mb-2">{topResult.title}</h3>
          <p class="text-sm text-gray-400 capitalize mb-6">{topResult.subtitle}</p>
          <button
            class="w-14 h-14 bg-spotify-green rounded-full flex items-center justify-center hover:scale-105 transition-transform shadow-xl"
            aria-label="Play"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 text-black ml-1">
              <path d="M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z" />
            </svg>
          </button>
        </div>
      </section>

      <!-- Songs -->
      <section>
        <h2 class="text-white text-2xl font-bold mb-4">Songs</h2>
        <div class="space-y-1">
          {songs.map((song) => (
            <SongListItem {...song} showAlbum={false} />
          ))}
        </div>
      </section>
    </div>

    <!-- Artists -->
    <section class="mb-8">
      <h2 class="text-white text-2xl font-bold mb-4">Artists</h2>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
        {artists.map((artist) => (
          <SearchResultCard {...artist} />
        ))}
      </div>
    </section>

    <!-- Albums -->
    <section class="mb-8">
      <h2 class="text-white text-2xl font-bold mb-4">Albums</h2>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
        {albums.map((album) => (
          <SearchResultCard {...album} />
        ))}
      </div>
    </section>

    <!-- Playlists -->
    <section class="mb-8">
      <h2 class="text-white text-2xl font-bold mb-4">Playlists</h2>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
        {playlists.map((playlist) => (
          <SearchResultCard {...playlist} />
        ))}
      </div>
    </section>
  </div>
</AppLayout>
